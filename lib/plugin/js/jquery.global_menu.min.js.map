{"version":3,"file":"jquery.global_menu.min.js","sources":["plugin/js/jquery.global_menu.js"],"sourcesContent":[";(function(factory) {\n  'use strict';\n\n  if (typeof define === 'function' && define.amd) {\n    define(['jquery'], factory);\n  } else if (typeof exports !== 'undefined') {\n    module.exports = factory(require('jquery'));\n  } else {\n    factory(jQuery);\n  }\n\n}(function($) {\n  'use strict';\n\n  let GlobalMenu = {};\n  GlobalMenu = (function() {\n    let instance_uid = 0;\n\n    function GlobalMenu(elem, settings) {\n      let _ = this;\n\n      _.$elem = $(elem);\n\n      // fixed value settings\n      _.settings = $.extend(true, {\n        submenu : {\n          is_active : false,\n          accordion : {\n            menu_width : {\n              is_active : false,\n              min_width : 220,\n              max_width : 350\n            }\n          }\n        },\n        scroll : {\n          down_fix : false,\n          up_hide : false\n        }\n      }, settings);\n\n\n      // sub menu css class name\n      _.submenu_class = {\n        accordion : {\n          item : 'gm_accordion',\n          body : 'gm_accordion_body',\n        },\n        mega : {\n          item : 'gm_mega',\n          body : 'gm_mega_body'\n        }\n      }\n\n      _.instance_uid = instance_uid++;\n      _.fixed_active_position;\n\n\n      // init on load\n      _.init_on_load();\n\n      _.global_menu();\n    }\n\n    return GlobalMenu;\n  }());\n\n\n\n  /** ----------------------------------------------------------------------------\n   * init on load\n   *----------------------------------------------------------------------------*/\n  GlobalMenu.prototype.init_on_load = function() {\n    let _ = this;\n\n    // prevent animation\n    _.$elem.addClass('is_preloaded');\n\n    // add scroll event when scroll fix is active\n    if(_.settings.scroll.down_fix) {\n      $(window).trigger('scroll');\n    }\n  };\n\n\n  /** ----------------------------------------------------------------------------\n   * global menu\n   *----------------------------------------------------------------------------*/\n  GlobalMenu.prototype.global_menu = function() {\n    let _ = this;\n\n    if(_.settings.submenu.is_active){\n      // job for submenu\n      _.manage_submenu();\n\n      if(_.settings.submenu.accordion.menu_width.is_active){\n\n        // job for accordion menu width\n        _.change_accordion_menu_width();\n      }\n    }\n\n    if(_.settings.scroll.down_fix){\n      if(_.settings.scroll.up_hide){\n        _.scroll_to_fixed_hide();\n      }\n\n      if(!_.settings.scroll.up_hide){\n        _.scroll_down_to_fixed();\n      }\n    }\n\n  };\n\n\n  /** ----------------------------------------------------------------------------\n   * sub menu\n   *----------------------------------------------------------------------------*/\n  /** --------------------------------------\n   * sub menu\n   *--------------------------------------*/\n  GlobalMenu.prototype.manage_submenu = function() {\n    let _ = this;\n\n    _.submenu_job[\n      _.is_touch_display()? 'click' : 'hover'\n    ].bind(_)();\n\n    _.submenu_job.close.bind(_)();\n  };\n\n  GlobalMenu.prototype.submenu_job = {\n    init : function(event_obj) {\n      let _ = this;\n\n      $(_.$elem).find(_.get_submenu()).each(function(){\n\n        if(\n          typeof event_obj !== 'undefined'\n          && this == event_obj\n        ) return;\n\n        $(this).removeClass('is_show');\n\n      });\n    },\n    click : function() {\n      let _ = this,\n          flag = true;\n\n      $(_.$elem).find(_.get_submenu()).on('click', function(e){\n        e.preventDefault();\n\n        if(flag == false) return;\n        flag = false;\n        setTimeout(function(){ flag = true; }, 500);\n\n        _.submenu_job.init.bind(_)(this);\n\n        $(this).toggleClass('is_show');\n\n      });\n    },\n    hover : function() {\n      let _ = this;\n\n      $(_.$elem).find(_.get_submenu()).on('mouseover', function(){\n\n        _.submenu_job.init.bind(_)(this);\n        $(this).addClass('is_show');\n\n      });\n    },\n    close : function() {\n      let _ = this;\n\n      $(_.$elem).on('mouseleave', function(){\n        _.submenu_job.init.bind(_)();\n      });\n    }\n  };\n\n\n  /** --------------------------------------\n   * change accordion menu width\n   *--------------------------------------*/\n  GlobalMenu.prototype.change_accordion_menu_width = function() {\n    let _ = this,\n        li_anchor = $(_.$elem).find('.gm_accordion_body li a');\n\n    $(_.$elem).find('.gm_accordion_body').each(function(){\n      $(this).css(\n        'width'\n        , _.get_accordion_menu_width(\n\n          $(this).children('li'),\n          {\n            'font_size' : li_anchor.css('font-size'),\n            'letter_spacing' : li_anchor.css('letter-spacing'),\n            'padding_left' : li_anchor.css('padding-right'),\n            'padding_right' : li_anchor.css('padding-left')\n          }\n\n        )\n\n      );\n    });\n\n  };\n\n  GlobalMenu.prototype.get_accordion_menu_width = function(list_items, css_obj) {\n    let _ = this,\n        width = _.settings.submenu.accordion.menu_width.min_width,\n        max_width = _.settings.submenu.accordion.menu_width.max_width;\n\n    list_items.each(function(){\n      let $span = $(document.createElement('span'));\n      $span\n        .css({\n          'font-size' : css_obj.font_size,\n          'letter-spacing' : css_obj.letter_spacing,\n          'padding-left' : css_obj.padding_left,\n          'padding-right' : css_obj.padding_right,\n          'display' : 'none',\n          'white-space' : 'nowrap'\n        })\n        .append($(this).text());\n\n      $('body').append($span);\n\n      let span_outer_width = $span.outerWidth();\n\n      if(width < span_outer_width){\n        width = span_outer_width;\n      }\n\n      if(\n        max_width > 0\n        && max_width < span_outer_width\n      ){\n        width = max_width;\n        return;\n      }\n\n      $span.remove();\n    });\n\n    return width;\n\n  }\n\n  /** --------------------------------------\n   * Scroll down to fixed\n   *--------------------------------------*/\n  GlobalMenu.prototype.scroll_down_to_fixed = function() {\n    let _ = this,\n        curr_position;\n\n    _.fixed_active_position = parseInt(_.$elem.offset().top + _.$elem.height());\n\n    $(window).on('scroll', function(){\n      curr_position = $(this).scrollTop();\n\n      _.scroll_down_to_fixed_jobs[\n        _.fixed_active_position < curr_position?\n          'fixed' : 'unfixed'\n      ].bind(_)();\n    });\n  }\n\n  GlobalMenu.prototype.scroll_down_to_fixed_jobs = {\n    unfixed : function(){\n      let _ = this;\n\n      _.fixed_active_position = parseInt(_.$elem.offset().top + _.$elem.height());\n\n      _.$elem.find('.gm_inner')\n        .removeClass('is_fixed');\n\n      _.$elem.css({\n        'height' : ''\n      });\n\n      _.$elem.trigger('global_menu_unfixed');\n\n    },\n    fixed : function(){\n      let _ = this;\n\n      _.fixed_active_position = parseInt(_.$elem.offset().top);\n\n      _.$elem.css('height', _.$elem.height());\n\n      _.$elem.find('.gm_inner')\n        .addClass('is_fixed');\n\n      _.$elem.trigger('global_menu_fixed');\n    }\n  }\n\n\n\n  /** --------------------------------------\n   * Scroll up to fix global menu, scroll down to hide it\n   *--------------------------------------*/\n  GlobalMenu.prototype.scroll_to_fixed_hide = function() {\n    let _ = this,\n        curr_position,\n        last_position = $(window).scrollTop();\n\n    _.fixed_active_position = parseInt(_.$elem.offset().top + _.$elem.height());\n\n    $(window).on('scroll', function(){\n      curr_position = $(this).scrollTop();\n\n      _.scroll_to_fixed_hide_job[\n        _.fixed_active_position < curr_position?\n          'fixed' : 'unfixed'\n      ].bind(_)();\n\n      if(\n        _.fixed_active_position < curr_position &&\n        last_position !== curr_position\n      ){\n        _.scroll_to_fixed_hide_job[\n          last_position < curr_position?\n            'hide' : 'show'\n        ].bind(_)();\n      }\n\n      last_position = curr_position;\n    });\n  }\n\n  GlobalMenu.prototype.scroll_to_fixed_hide_job = {\n    unfixed : function(){\n      let _ = this;\n\n      _.fixed_active_position = parseInt(_.$elem.offset().top + _.$elem.height());\n\n      _.$elem.find('.gm_inner')\n        .removeClass('is_fixed is_scroll_hide is_scroll_show')\n        .css({\n          'transition' : '',\n          'margin-top' : ''\n        });\n\n      _.$elem.css({\n        'height' : ''\n      });\n\n      _.$elem.trigger('global_menu_unfixed');\n    },\n    fixed : function(){\n      let _ = this;\n\n      _.fixed_active_position = parseInt(_.$elem.offset().top);\n\n      _.$elem.css('height', _.$elem.height());\n\n      _.$elem.find('.gm_inner')\n        .addClass('is_fixed');\n\n      _.$elem.trigger('global_menu_fixed');\n    },\n    show : function(){\n      let _ = this;\n\n      _.$elem.find('.gm_inner')\n        .removeClass('is_scroll_hide')\n        .addClass('is_scroll_show')\n        .css({\n          'transition' : 'margin-top 0.2s',\n          'margin-top' : 0\n        });\n\n      _.$elem.trigger('global_menu_scroll_show');\n    },\n    hide : function(){\n      let _ = this,\n          $inner = _.$elem.find('.gm_inner');\n\n      $inner\n        .removeClass('is_scroll_show')\n        .addClass('is_scroll_hide')\n        .css('margin-top', -($inner.outerHeight()));\n\n\n      _.$elem.trigger('global_menu_scroll_hide');\n    }\n  }\n\n\n\n\n\n  /** ----------------------------------------------------------------------------\n   * other\n   *----------------------------------------------------------------------------*/\n  GlobalMenu.prototype.get_submenu = function() {\n    let _ = this,\n        selector = '',\n        cnt = 0;\n\n    $.each(_.submenu_class, function(index, value) {\n      if(cnt >= 1) selector += ', ';\n\n      selector += '.' + value.item;\n      cnt ++;\n    });\n\n    return selector;\n  };\n\n  GlobalMenu.prototype.is_touch_display = function() {\n    return window.ontouchstart !== undefined\n      && 0 < navigator.maxTouchPoints;\n  };\n\n\n\n  /** ----------------------------------------------------------------------------\n   * Plugin wrapper\n   *----------------------------------------------------------------------------*/\n  /**\n   * @return {any} plugin method return value\n   * @return {object} options\n   */\n  $.fn.global_menu = function(){\n    let _ = this,\n        opt = arguments[0],\n        args = Array.prototype.slice.call(arguments, 1),\n        l = _.length,\n        i,\n        ret;\n\n    for (i = 0; i < l; i++) {\n\n      if (typeof opt == 'object' || typeof opt == 'undefined'){\n\n        // Initialize the plugin\n        _[i].global_menu = new GlobalMenu(_[i], opt);\n\n      }else{\n\n        // Call method on the plugin instance\n        ret = _[i].global_menu[opt].apply(_[i].global_menu, args);\n\n        // When method has return job, return it\n        if (typeof ret != 'undefined') return ret;\n      }\n\n    };\n\n    // options object\n    return _;\n\n  };\n}));\n"],"names":["factory","define","amd","exports","module","require","jQuery","$","let","GlobalMenu","instance_uid","elem","settings","_","this","$elem","extend","submenu","is_active","accordion","menu_width","min_width","max_width","scroll","down_fix","up_hide","submenu_class","item","body","mega","fixed_active_position","init_on_load","global_menu","prototype","addClass","window","trigger","manage_submenu","change_accordion_menu_width","scroll_to_fixed_hide","scroll_down_to_fixed","submenu_job","is_touch_display","bind","close","init","event_obj","find","get_submenu","each","removeClass","click","flag","on","e","preventDefault","setTimeout","toggleClass","hover","li_anchor","css","get_accordion_menu_width","children","font_size","letter_spacing","padding_left","padding_right","list_items","css_obj","width","$span","document","createElement","font-size","letter-spacing","padding-left","padding-right","display","white-space","append","text","span_outer_width","outerWidth","remove","curr_position","parseInt","offset","top","height","scrollTop","scroll_down_to_fixed_jobs","unfixed","fixed","last_position","scroll_to_fixed_hide_job","transition","margin-top","show","hide","$inner","outerHeight","selector","cnt","index","value","undefined","ontouchstart","navigator","maxTouchPoints","fn","opt","arguments","args","Array","slice","call","l","length","i","ret","apply"],"mappings":"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"}